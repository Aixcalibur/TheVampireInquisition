vi_vampire_county_normal_effect = {

	root.capital_county = {
		save_scope_as = domicile_location # actually capital location, but too lazy to change

		holder = {
			send_interface_message = {
				type = send_interface_message_bad
				title = vi_vampire_policy.001.a.msg_title
				desc = vi_vampire_policy.001.a.msg_desc
				#tooltip = LOCALIZATION # optional, otherwise takes it from the message type
				left_icon = root # optional, character, artifact, or title
				right_icon = scope:domicile_location # optional, character, artifact, or title
				goto = scope:domicile_location # optional, character, barony title, province will add a goto button
				scope:domicile_location = {
					add_county_modifier = {
						modifier = vi_county_discreet_modifier
						years = 5
					}
					add_county_modifier = {
						modifier = vi_county_sapped_modifier
						years = 5
					}
				}
				add_legitimacy = miniscule_legitimacy_loss
			}

			add_opinion = {
				target = root
				modifier = suspicion_opinion
				opinion = -20
			}
		}
	}
	
	add_gold = {
		value = scope:domicile_location.capital_barony.available_loot
		multiply = 0.5
	}

	custom_tooltip = vi_vampire_policy.001.a.tt

	hidden_effect = {
		set_local_variable = {
			name = vi_development_tier
			value = {
				value = scope:domicile_location.development_level
				multiply = 0.2
				add = 1
			}
		}
	
		vi_add_stacking_modifier_effect = {
			MODIFIER = vi_sap_county_wealth_modifier
			TYPE = character
			LEVEL = local_var:vi_development_tier
			YEARS = 5 
		}
	}
}

vi_vampire_county_discreet_effect = {
	root.capital_county = {
		save_scope_as = domicile_location
		add_county_modifier = {
			modifier = vi_county_discreet_modifier
			years = 5
		}
	}
	if = {
		limit = {
			is_independent_ruler = yes
		}
		add_legitimacy = minor_legitimacy_gain
	}
	else = {
		liege ?= {
			send_interface_message = {
				type = send_interface_message_bad
				title = vi_vampire_policy.001.b.msg_title
				desc = vi_vampire_policy.001.b.msg_title
				left_icon = root # optional, character, artifact, or title
				right_icon = scope:domicile_location # optional, character, artifact, or title
				add_legitimacy = miniscule_legitimacy_gain
				add_opinion = {
					target = root
					modifier = grateful_opinion
					value = 10
				}
			}
		}
	}
}

vi_vampire_county_drain_effect = {
	root.capital_county = {
		save_scope_as = domicile_location

		holder = {
			send_interface_message = {
				type = send_interface_message_bad
				title = vi_vampire_policy.001.c.msg_title
				desc = vi_vampire_policy.001.c.msg_desc
				#tooltip = LOCALIZATION # optional, otherwise takes it from the message type
				left_icon = root # optional, character, artifact, or title
				right_icon = scope:domicile_location # optional, character, artifact, or title
				goto = scope:domicile_location # optional, character, barony title, province will add a goto button
				scope:domicile_location = {
					add_county_modifier = {
						modifier = vi_county_discreet_modifier
						years = 5
					}
					add_county_modifier = {
						modifier = vi_county_sapped_modifier
						years = 5
					}
					add_county_modifier = {
						modifier = vi_county_drained_modifier
						years = 5
					}
				}
				add_legitimacy = minor_legitimacy_loss

				add_opinion = {
					target = root
					modifier = suspicion_opinion
					opinion = -50
				}
			}
		}
	}

	add_gold = {
		value = scope:domicile_location.capital_barony.available_loot
		multiply = 1
	}

	hidden_effect = {
		set_local_variable = {
			name = vi_development_tier
			value = {
				value = scope:domicile_location.development_level
				multiply = 0.4
				add = 1
			}
		}
	
		vi_add_stacking_modifier_effect = {
			MODIFIER = vi_sap_county_wealth_modifier
			TYPE = character
			LEVEL = local_var:vi_development_tier
			YEARS = 5
		}
	}

	add_legitimacy = medium_legitimacy_loss
}


vi_vampire_county_investment_effect = {

	remove_gold = medium_gold_value

	root.capital_county = {
		save_scope_as = domicile_location

		holder = {
			send_interface_message = {
				type = send_interface_message_good
				title = vi_vampire_policy.001.d.msg_title
				desc = vi_vampire_policy.001.d.msg_desc
				#tooltip = LOCALIZATION # optional, otherwise takes it from the message type
				left_icon = root # optional, character, artifact, or title
				right_icon = scope:domicile_location # optional, character, artifact, or title
				goto = scope:domicile_location # optional, character, barony title, province will add a goto button
				scope:domicile_location = {
					add_county_modifier = {
						modifier = vi_county_discreet_modifier
						years = 5
					}
					add_county_modifier = {
						modifier = vi_county_underworld_investment_modifier
						years = 5
					}
				}
			}
		}
	}
}