vi_vampire_add_perk_effect = {
	if = {
		limit = {
			has_perk = $PERK$
		}

		add_vi_vampire_lifestyle_xp = 1000

	}
	else = {
		add_perk = $PERK$
	}
}

vi_vampire_skinny_effect = {
	set_variable = {
		name = character_weight_variable
		value = {
			value = base_weight
			multiply = -1
			add = -20
		}
	}
	change_current_weight = -25
}

vi_gain_random_trait_effect = {
	random_list = {
		40 = {
			add_trait = intellect_good_1
			add_trait = shrewd
			add_diplomacy_lifestyle_xp = 500

			modifier = {
				OR = {
					has_trait = intellect_good_1
					has_trait = intellect_good_2
					has_trait = intellect_good_3
					has_trait = intellect_bad_1
					has_trait = intellect_bad_2
					has_trait = intellect_bad_3
					has_trait = dull
				}
				add = -1000
			}
		}

		40 = {
			add_trait = physique_good_2
			add_trait = strong
			add_martial_lifestyle_xp = 500

			modifier = {
				OR = {
					has_trait = physique_good_1
					has_trait = physique_good_2
					has_trait = physique_good_3
					has_trait = physique_bad_1
					has_trait = physique_bad_2
					has_trait = physique_bad_3
					has_trait = weak
				}
				add = -1000
			}
		}

		40 = {
			add_trait = beauty_good_3
			add_intrigue_lifestyle_xp = 500

			modifier = {
				OR = {
					has_trait = beauty_good_1
					has_trait = beauty_good_2
					has_trait = beauty_good_3
					has_trait = beauty_bad_1
					has_trait = beauty_bad_2
					has_trait = beauty_bad_3
				}
				add = -1000
			}
		}

		40 = {
			add_trait = adminstrator
			add_stewardship_lifestyle_xp = 1000

			modifier = {
				has_trait = administrator
				add = -1000
			}
		}

		1 = {
			add_learning_lifestyle_xp = 2000
			# add_trait = blind
			add_trait = possessed_1
			add_trait = lunatic_1
			add_trait = intellect_good_3
		}
	}
}

vi_esclarmonde_after_effect = {

	# set_mother = character:vi_venus

	vi_vampire_skinny_effect = yes

	set_immortal_age = 25

	add_prestige_level = 2

	change_influence = 2000

	vi_make_vampire_effect = yes

	if = {
		limit = { NOT = { has_perk = thoughtful_perk } }
		add_perk = thoughtful_perk
	}

	if = {
		limit = { NOT = { has_perk = befriend_perk } }
		add_perk = befriend_perk
	}

	if = {
		limit = { NOT = { has_perk = confidants_perk } }
		add_perk = confidants_perk
	}

	if = {
		limit = { NOT = { has_perk = kidnapper_perk } }
		add_perk = kidnapper_perk
	}

	vi_add_sirensong_effect = yes

	add_trait = lifestyle_reveler

	add_trait_xp = {
		trait = lifestyle_reveler
		value = 100
	}

	add_prowess_skill = 4

	add_character_flag = vi_esclarmonde
	give_nickname = nick_vi_queenofthenight

}

vi_add_sirensong_effect = {
	vi_vampire_add_perk_effect = {
		PERK = vi_charm_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_animal_speak_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_animal_command_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_soothe_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_galvanize_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_persuasion_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_enthrall_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_presence_perk
	}
	vi_vampire_add_perk_effect = {
		PERK = vi_heartstealer_perk
	}
}