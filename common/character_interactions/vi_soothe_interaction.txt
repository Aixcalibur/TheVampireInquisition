#Localization is in Lifestyles
vi_soothe_interaction = {
	icon = icon_stress_loss
	category = interaction_category_friendly
	common_interaction = yes
	interface_priority = 20
	desc = vi_soothe_interaction_desc

	ai_targets = {
		ai_recipients = scripted_relations
	}
	ai_targets = {
		ai_recipients = liege
	}
	ai_targets = {
		ai_recipients = neighboring_rulers
		ai_recipients = peer_vassals
		max = 10
	}
	ai_targets = {
		ai_recipients = vassals
		max = 10
	}
	ai_target_quick_trigger = {
		adult = yes
	}
	ai_frequency = 120

	is_shown = {
		NOT = {
			scope:recipient = scope:actor
		}
		scope:actor = {
			has_perk = vi_soothe_perk
		}
	}

	is_highlighted = {
		scope:recipient = {
			stress_level >= 2
		}
	}

	highlighted_reason = HIGHLIGHTED_FAMILY_RATING

	is_valid_showing_failures_only = {
		scope:actor = {
			has_perk = vi_soothe_perk
		}
		scope:recipient = { is_busy_in_events_localised = yes }
	}

	on_auto_accept = {
		# scope:recipient = {
		# 	trigger_event = char_interaction.0100
		# }
	}

	on_accept = {
		scope:actor = {
			add_character_modifier = {
				modifier = vi_vampire_strain_modifier
				years = 3
			}
			stress_impact = {
				base = miniscule_stress_impact_gain
				compassionate = minor_stress_impact_loss
			}
		}
		scope:recipient = {
			# Verify that they could become friend
			
			send_interface_message = {
				type = send_interface_message_neutral
				title = vi_charm_interaction
				desc = vi_charm_interaction_message_desc
				left_icon = scope:actor # optional, character, artifact, or title
				random_list = {
					40 = {
						stress_impact = {
							base = major_stress_impact_loss
						}
						remove_opinion = {
							target = scope:actor
							modifier = suspicion_opinion
						}
						modifier = { add = scope:actor.diplomacy }
						modifier = { subtract = scope:recipient.intrigue }
					}
					40 = {
						stress_impact = {
							base = medium_stress_impact_loss
						}
						modifier = { add = scope:actor.diplomacy }
						modifier = { add = scope:recipient.intrigue }
					}
					40 = {
						stress_impact = {
							base = minor_stress_impact_loss
						}
						modifier = { subtract = scope:actor.diplomacy }
						modifier = { add = scope:recipient.intrigue }
					}
				}
			}
		}
	}
	
	auto_accept = yes
	
	ai_potential = {
		is_available_at_peace_ai_adult = yes
		# ai_greed < medium_positive_ai_value
		# short_term_gold >= gift_interaction_cutoff
		# ai_has_conqueror_personality = no
		# ai_should_focus_on_building_in_their_capital = no
	}
	
	auto_accept = {
		custom_description = {
			text = auto_accept_interaction_ai	
			object = scope:recipient
			scope:recipient = {
				is_ai = yes
			}
		}
	}
	
	ai_min_reply_days = 1
	ai_max_reply_days = 1
	
	ai_will_do = {
		base = -10

		modifier = {
			add = 11
			scope:recipient = {
				has_opinion_modifier = {
					modifier = suspicion_opinion
					target = scope:actor
				}
			}
		}
		
		modifier = {
			add = 25
			AND = {
				OR = {
					scope:actor = { has_relation_friend = scope:recipient }
					scope:actor = { has_relation_best_friend = scope:recipient }
				}
				scope:recipient = { stress_level >= 1 }
			}
		}

		modifier = {
			add = 50
			AND = {
				OR = {
					scope:actor = { has_relation_friend = scope:recipient }
					scope:actor = { has_relation_best_friend = scope:recipient }
				}
				scope:recipient = { stress_level >= 2 }
			}
		}

		modifier = {
			add = 100
			AND = {
				OR = {
					scope:actor = { has_relation_friend = scope:recipient }
					scope:actor = { has_relation_best_friend = scope:recipient }
				}
				scope:recipient = { stress_level >= 3 }
			}
		}

		modifier = {
			factor = 0
			scope:actor.stress_level >= 2
		}

		modifier = {
			factor = 0.5
			scope:actor.stress_level >= 1
		}
	}
}
