
vi_sponsor_princedom_interaction = {
	category = interaction_category_vassal
	icon = support_candidacy
	interface_priority = 95
	desc = invite_to_court_interaction_desc
	
	is_shown = {
		scope:actor = {
			has_government = vi_vampire_government
			is_landed = no
		}
		scope:recipient = {
			is_courtier_of = scope:actor
			vi_is_vampire_trigger = yes
		}
	}

	is_valid_showing_failures_only = {
		scope:recipient = {
			NOT = {
				has_trait = vi_vampire_1
			}
		}
		scope:actor = {
			gold > 0
		}
	}
	
	#Pay som gold to persuade a wandering character to come to your court
	# send_option = {
	# 	is_shown = {
	# 		exists = scope:recipient
	# 	}
	# 	flag = cover_travel_expenses
	# 	localization = COVER_TRAVEL_EXPENSES
	# }
	send_option = { # EP3 Influence
		is_shown = { # Actor must have a government that uses influence 
			scope:actor = {
				government_has_flag = government_has_influence
			}
		}
		is_valid = {
			# Actor has enough influence
			scope:actor = { influence >= medium_influence_value }
			# Both characters are within the same top realm
			scope:recipient.top_liege = scope:actor.top_liege
		}
		flag = influence_send_option
		localization = TRADE_INFLUENCE_FOR_BETTER_AI_ACCEPTANCE
	}
	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook
		localization = SCHEME_HOOK
	}
	should_use_extra_icon = {
		scope:actor = { has_usable_hook = scope:recipient }
	}
	extra_icon = "gfx/interface/icons/character_interactions/hook_icon.dds"

	send_options_exclusive = no

	cost = {
		influence = {
			value = 0
			if = {
				limit = { scope:influence_send_option = yes }
				add = scope:actor.medium_influence_value
				desc = INFLUENCE_INTERACTION_ACCEPTANCE_SEND_OPTION
			}
		}
	}

	on_accept = {
		
		scope:actor = {

			capital_county.empire = {
				ordered_de_jure_county = {
					limit = {
						NOT = {
							has_county_modifier = vi_county_discreet_modifier
						}
					}
					order_by = development_level

					save_scope_as = princedom_county
				}
			}
			
			send_interface_message = {
				type = event_generic_neutral
				title = vi_sponsor_princedom_interaction
				right_icon = scope:recipient

				scope:recipient = {
					vi_create_vassal_princedom_effect = {
						VI_LIEGE = scope:actor.top_liege
						VI_COUNTY = scope:princedom_county
					}
				}

				if = {
					limit = { always = scope:hook }
					scope:actor = {
						use_hook = scope:recipient
					}
				}
			}
		}
		
		
	}

	ai_accept = {
 		base = 10

 		opinion_modifier = {
 			opinion_target = scope:actor
 			multiplier = 0.5
 			step = 5
 			max = 25
 		}

		opinion_modifier = {
			trigger = {
				exists = actor.top_liege
				is_courtier_of = liege
			}
			opinion_target = scope:actor.top_liege
			multiplier = 0.5
			step = 5
			max = 50
		}


		modifier = {
			add = 25
			has_trait = trusting
		}

		modifier = {
			add = -25
			has_trait = paranoid
		}

		modifier = {
			add = 10
			has_trait = brave
		}

		modifier = {
			add = -25
			has_trait = craven
		}

		modifier = {
			add = 100
			has_trait = ambitious
		}

		modifier = {
			add = 25
			has_trait = greedy
		}

		modifier = {
			add = -25
			has_trait = content
		}

 		modifier = {
 			add = -50
 			desc = AI_INSPIRED
 			exists = inspiration
			inspiration = {
				NOT = {
					exists = inspiration_sponsor
				}
			}
 		}

 		modifier = {
 			add = -500
 			desc = AI_SPONSORED_INSPIRATION
 			exists = inspiration
			inspiration = {
				exists = inspiration_sponsor
			}
 		}

 		modifier = {
			add = 50
			scope:influence_send_option = yes
			desc = INFLUENCE_INTERACTION_ACCEPTANCE_SEND_OPTION
		}
	}

	auto_accept = {
		custom_description = {
			text = "spending_hook"
			subject = scope:actor
			object = scope:recipient
			scope:hook = yes
		}
	}
}