
vi_join_faction_interaction = {
	interface_priority = 90
	common_interaction = yes
	icon = join_faction_war_interaction

	category = interaction_category_admin

	desc = vi_join_faction_interaction_desc

	# cooldown = { years = 5 }
	# cooldown_against_recipient = { years = 1 }

	is_shown = {
		NOT = {
			scope:actor = scope:recipient
		}
		scope:actor = {
			has_government = vi_vampire_government
		}
		scope:recipient = {
			is_ai = yes
			is_ruler = yes
			is_landed = yes
			# is_independent_ruler = no
			NOT = {
				top_liege = scope:actor.top_liege
			}
		}
		
	}

	is_valid_showing_failures_only = {

		scope:recipient = {
			has_targeting_faction = yes
		}
	}

	is_highlighted = {
		# OR = {
		# 	scope:actor = { stress_level >= 1 }
		# }
	}

	send_option = { # EP3 Influence
		is_shown = { # Actor must have a government that uses influence 
			scope:actor = {
				government_has_flag = government_has_influence
			}
		}
		is_valid = {
			# Actor has enough influence
			scope:actor = { influence >= medium_influence_value }
			# Both characters are within the same top realm
			# scope:recipient.top_liege = scope:actor.top_liege
		}
		flag = influence_send_option
		localization = TRADE_INFLUENCE_FOR_BETTER_AI_ACCEPTANCE
	}
	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook
		localization = SCHEME_HOOK
	}
	should_use_extra_icon = {
		scope:actor = { has_usable_hook = scope:recipient }
	}
	extra_icon = "gfx/interface/icons/character_interactions/hook_icon.dds"

	send_options_exclusive = no

	on_accept = {

		scope:recipient = {
			random_targeting_faction = {
				save_scope_as = vi_faction
			}
		}
		
		scope:actor = {
			join_faction_forced = {
				faction = scope:vi_faction
				forced_by = scope:actor
				years = 1
			}

			open_view = {
				view = factions_window
				player = root
			}
		}
	}

	auto_accept = yes

# 	ai_accept = {
# 		base = -25

# 		opinion_modifier = {
# 			opinion_target = scope:recipient.liege
# 			multiplier = -0.5
# 			step = 5
# 			max = 50
# 		}

# 		opinion_modifier = {
# 			opinion_target = scope:actor
# 			multiplier = 0.5
# 			step = 5
# 			max = 25
# 		}

# 		modifier = {
# 			add = 25
# 			has_trait = trusting
# 		}
# 		modifier = {
# 			add = -25
# 			has_trait = paranoid
# 		}
# 		modifier = {
# 			add = 10
# 			has_trait = brave
# 		}
# 		modifier = {
# 			add = -25
# 			has_trait = craven
# 		}
# 		modifier = {
# 			add = 100
# 			has_trait = ambitious
# 		}
# 		modifier = {
# 			add = 25
# 			has_trait = greedy
# 		}
# 		modifier = {
# 			add = -25
# 			has_trait = content
# 		}

# 		modifier = {
# 			add = 50
# 			scope:influence_send_option = yes
# 			desc = INFLUENCE_INTERACTION_ACCEPTANCE_SEND_OPTION
# 		}
#    }

	# AI
	ai_targets = {
		ai_recipients = neighboring_rulers
		max = 10
	}

	ai_frequency = 24

	ai_potential = {
		always = no
	}

	ai_will_do = {
		base = -25

		
	}
}
